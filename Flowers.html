<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Flashlight Fixed</title>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      background: black;
      overflow-x: hidden;
    }

    #loading {
      position: fixed;
      top: 0; left: 0;
      width: 100vw; height: 100vh;
      background: black;
      color: #C8BDA0;
      font-size: 2rem;
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 10000;
      transition: opacity 1s ease;
    }

    #flashlight {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background: rgba(0,0,0,1);
      pointer-events: none;
      z-index: 9999;
    }

    #flashlight::before {
      content: "";
      position: absolute;
      top: 0; left: 0;
      width: 100vw;
      height: 100vh;
      background: radial-gradient(circle, transparent 100px, black 160px);
      transform: translate(0, 50%);
      animation: flashlightMove 6s ease-out forwards;
    }

    @keyframes flashlightMove {
      0%, 3%   { opacity: 0; }
      4%       { opacity: 1; }
      6%       { opacity: 0; }
      8%       { opacity: 1; }
      10%      { opacity: 0; }
      12%      { opacity: 1; }
      20%      { transform: translate(0%, 50%); }
      40%      { transform: translate(100vw, 50%); }
      60%      { transform: translate(50vw, 0%); }
      80%      { transform: translate(50vw, 100%); }
      100%     { transform: translate(50vw, 50%); }
    }
  </style>
</head>
<body>
  <div id="loading">LOADING...</div>
  <div id="flashlight"></div>

  <script>
    // Hide loading screen after 2s
    window.addEventListener('load', () => {
      setTimeout(() => {
        document.getElementById('loading').style.opacity = '0';
        setTimeout(() => {
          document.getElementById('loading').style.display = 'none';
        }, 1000);
      }, 2000);
    });

    // After animation ends, enable scroll tracking for flashlight
    setTimeout(() => {
      const flashlight = document.querySelector('#flashlight::before'); // pseudo-elements can't be selected, so instead:
      const overlay = document.querySelector('#flashlight');

      window.addEventListener("scroll", () => {
        const scrollY = window.scrollY;
        const centerX = window.innerWidth / 2;
        const centerY = window.innerHeight / 2;
        const offsetY = centerY + (scrollY / 2);
        overlay.style.background = `radial-gradient(circle at ${centerX}px ${offsetY}px, transparent 100px, black 160px)`;
      });
    }, 7000); // after animation ends
  </script>
</body>
</html>
